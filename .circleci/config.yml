# Javascript Node CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-javascript/ for more details
#
version: 2
jobs:
  build:
    docker:
      # specify the version you desire here
      - image: circleci/buildpack-deps:jessie

    steps:
      - checkout
      - setup_remote_docker

      - run:
          name: test
          command: docker-compose exec webserver npm run test
    #   - run:
    #      name: Waiting for Postgres to be ready
    #     command: |
    #      for i in `seq 1 10`;
    #     do
    #      nc -z localhost 5432 && echo Success && exit 0
    #     echo -n .
    #    sleep 1
    #  done
    #  echo Failed waiting for Postgres && exit 1
